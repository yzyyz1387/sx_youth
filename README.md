# 适用于 Nonebot2 的陕西共青团工具

## 配置

请在`.env.*`文件作出如下配置

```yml
YOUTH_ACCOUNT=17766668888 #支书（平台管理员）手机号
YOUTH_PASSWORD=1a2b3c  # 密码
YOUTH_NUMBER=30  #团员数
YOUTH_GROUP=[123456,987654] #涉及相关功能的群号，一般为班级QQ群
```

## 目前支持

### 查大学习完成情况

#### 指令

- 查大学习  
  查询大学习情况并发送信息：
  示例：

  > 【user】:   查大学习
  >

  > 【bot】:  请输入验证码 [图片]
  >

  > 【user】: 1234
  >

  > 【bot】：  
  > 本次大学习情况如下：  
  > 总人数：30  
  > 已学：26  
  > 未学：4  
  > 学习率：86.67%  
  > 未完成名单：  
  > xxx  
  > xxx  
  > xx  
  > xxxx  
  >
- 查大学习 @

  艾特 模式，本模式只支持在配置的 `youth_group` 群中进行

  机器人将@出未学习的人

  如果没发送验证码图片，而让用户发送二维码，可能是网络原因导致，此时可回复 `?` 来尝试重新发送验证码图片
  注意，你需要将一个excel文件放入 `机器人/陕西共青团工具`下，并且本插件只支持一个excel文件。  
  该文件第一列放学生姓名（全名），第二列放 QQ 号。  
  在 机器人启动时，将对该文件进行解析，并生成 `机器人/陕西共青团工具/youth_qq.json`  

  关于@模式，可能支部有重名的问题，暂未解决

## 其他事项

由于登录使用 playwright ,比较耗内存，若用户1正在查询，则其他用户无法进行查询


## TODO

 - [ ] 风控后渲染图片发送
 - [ ] 解决@模式下重名情况
 - [ ] 若存在本地的 token 可用，则直接使用
